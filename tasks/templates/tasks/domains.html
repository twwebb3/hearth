{% extends "base.html" %}

{% block title %}Domains{% endblock %}

{% block content %}
{% include "tasks/_subnav.html" with page_title="Domains" %}
<p style="margin-top: 0; color: #6b7280;">{{ date|date:"l, F j, Y" }}</p>

{% if domains %}
<div style="display: flex; flex-direction: column; gap: 6px;">
  {% for d in domains %}
  <div class="card" style="display: flex; align-items: center; gap: 10px;">
    <span style="display: inline-block; width: 12px; height: 12px; border-radius: 50%; flex-shrink: 0; background: {{ d.color_hex }};"></span>
    <div style="flex: 1; min-width: 0;">
      <div style="font-weight: 600;"><a href="{% url 'tasks:domain_detail' pk=d.pk %}" style="color: inherit; text-decoration: none;">{{ d.name }}</a></div>
      {% if d.description %}<div style="font-size: 13px; color: #6b7280;">{{ d.description }}</div>{% endif %}
    </div>
    <div style="display: flex; gap: 12px; font-size: 13px; color: #6b7280; flex-shrink: 0;">
      <span>{{ d.active_projects }} project{{ d.active_projects|pluralize }}</span>
      <span style="{% if d.todays_incomplete %}color: #b45309; font-weight: 600;{% endif %}">{{ d.todays_incomplete }} incomplete today</span>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="card" style="text-align: center; color: #6b7280; padding: 24px;">
  No domains yet.
</div>
{% endif %}

<h3 style="margin-top: 24px;">Add Domain</h3>
<form method="post" class="card" style="display: flex; flex-direction: column; gap: 8px;">
  {% csrf_token %}
  <div style="display: flex; gap: 8px; flex-wrap: wrap;">
    <input type="text" name="name" placeholder="Name" required
           style="flex: 2; min-width: 140px; padding: 6px 10px; border: 1px solid #d1d5db; border-radius: 6px;">
    <input type="text" name="description" placeholder="Description (optional)"
           style="flex: 3; min-width: 180px; padding: 6px 10px; border: 1px solid #d1d5db; border-radius: 6px;">
  </div>
  <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap;">
    <label style="font-size: 13px; color: #6b7280;">Color</label>
    <input type="color" name="color_hex" value="#6B7280"
           style="width: 36px; height: 30px; padding: 0; border: 1px solid #d1d5db; border-radius: 4px; cursor: pointer;">
    <label style="font-size: 13px; color: #6b7280; margin-left: 8px;">Sort order</label>
    <input type="number" name="sort_order" value="0"
           style="width: 64px; padding: 6px 10px; border: 1px solid #d1d5db; border-radius: 6px;">
    <button type="submit" class="btn btn-primary" style="margin-left: auto;">Add Domain</button>
  </div>
</form>
{% endblock %}
